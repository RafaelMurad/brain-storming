---
// Star field background component with parallax layers
---

<div class="star-field fixed inset-0 -z-10 overflow-hidden">
  <!-- Layer 1: Distant stars (slowest) -->
  <div id="stars-layer-1" class="absolute inset-0"></div>

  <!-- Layer 2: Mid-distance stars -->
  <div id="stars-layer-2" class="absolute inset-0"></div>

  <!-- Layer 3: Close stars (fastest) -->
  <div id="stars-layer-3" class="absolute inset-0"></div>

  <!-- Nebula gradients -->
  <div class="absolute inset-0 bg-gradient-to-br from-cosmic-purple/10 via-transparent to-cosmic-pink/5"></div>
  <div class="absolute inset-0 bg-gradient-to-tl from-cosmic-blue/10 via-transparent to-transparent"></div>

  <!-- Shooting stars container -->
  <div id="shooting-stars" class="absolute inset-0 pointer-events-none"></div>
</div>

<script>
  interface Star {
    x: number;
    y: number;
    size: number;
    opacity: number;
    twinkleSpeed: number;
  }

  function createStarElement(star: Star): HTMLDivElement {
    const el = document.createElement('div');
    el.className = 'absolute rounded-full bg-white';
    el.style.left = `${star.x}%`;
    el.style.top = `${star.y}%`;
    el.style.width = `${star.size}px`;
    el.style.height = `${star.size}px`;
    el.style.opacity = String(star.opacity);
    el.style.animation = `twinkle ${star.twinkleSpeed}s ease-in-out infinite`;
    el.style.animationDelay = `${Math.random() * 3}s`;
    return el;
  }

  function generateStars(container: HTMLElement, count: number, minSize: number, maxSize: number) {
    for (let i = 0; i < count; i++) {
      const star: Star = {
        x: Math.random() * 100,
        y: Math.random() * 100,
        size: Math.random() * (maxSize - minSize) + minSize,
        opacity: Math.random() * 0.7 + 0.3,
        twinkleSpeed: Math.random() * 3 + 2,
      };
      container.appendChild(createStarElement(star));
    }
  }

  function createShootingStar() {
    const container = document.getElementById('shooting-stars');
    if (!container) return;

    const star = document.createElement('div');
    star.className = 'absolute w-1 h-1 bg-white rounded-full';
    star.style.left = `${Math.random() * 70}%`;
    star.style.top = `${Math.random() * 50}%`;
    star.style.boxShadow = '0 0 6px 2px rgba(255, 255, 255, 0.6), -30px 0 20px 2px rgba(255, 255, 255, 0.3)';
    star.style.animation = 'shooting-star 1.5s linear forwards';

    container.appendChild(star);
    setTimeout(() => star.remove(), 1500);
  }

  // Initialize star layers
  document.addEventListener('DOMContentLoaded', () => {
    const layer1 = document.getElementById('stars-layer-1');
    const layer2 = document.getElementById('stars-layer-2');
    const layer3 = document.getElementById('stars-layer-3');

    if (layer1) generateStars(layer1, 100, 1, 2);
    if (layer2) generateStars(layer2, 50, 2, 3);
    if (layer3) generateStars(layer3, 30, 2, 4);

    // Periodic shooting stars
    setInterval(() => {
      if (Math.random() > 0.7) createShootingStar();
    }, 3000);
  });

  // Parallax effect on scroll
  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    const layer1 = document.getElementById('stars-layer-1');
    const layer2 = document.getElementById('stars-layer-2');
    const layer3 = document.getElementById('stars-layer-3');

    if (layer1) layer1.style.transform = `translateY(${scrollY * 0.1}px)`;
    if (layer2) layer2.style.transform = `translateY(${scrollY * 0.2}px)`;
    if (layer3) layer3.style.transform = `translateY(${scrollY * 0.3}px)`;
  });
</script>

<style>
  @keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
  }

  @keyframes shooting-star {
    0% { transform: translateX(0) translateY(0); opacity: 1; }
    70% { opacity: 1; }
    100% { transform: translateX(300px) translateY(300px); opacity: 0; }
  }
</style>
